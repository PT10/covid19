<div class="container-fluid">
  <nav class="navbar navbar-expand-lg navbar-dark">
    <a class="navbar-brand" href="#">
      <img src="assets/brand-light.svg" height="30px" width="150px">
    </a> 
    <button class="navbar-toggler" type="button" data-toggle="collapse"   data-target="#target" aria-controls="target" aria-expanded="false" aria-label="Toggle navigation" (click)="isShown = !isShown" >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" [ngClass]="{ 'show': isShown }" id="target">
      <ul class="navbar-nav mr-auto">
        <li [ngClass]="view === 'usActive' ? 'nav-item active' : 'nav-item'">
          <a class="nav-link" href="#" (click)="isShown = !isShown; view = 'usActive';">US active</a>
        </li>
        <li [ngClass]="view === 'usDeaths' ? 'nav-item active' : 'nav-item'">
          <a class="nav-link" href="#" (click)="view = 'usDeaths'; isShown = !isShown">US deaths</a>
        </li>
        <li [ngClass]="view === 'worldActive' ? 'nav-item active' : 'nav-item'">
          <a class="nav-link" href="#" (click)="view = 'worldActive'; isShown = !isShown">Worldwide active</a>
        </li>
        <li [ngClass]="view === 'worldDeaths' ? 'nav-item active' : 'nav-item'">
          <a class="nav-link" href="#" (click)="view = 'worldDeaths'; isShown = !isShown">Worldwide deaths</a>
        </li>
      </ul>
    </div>
  </nav>
  <app-progress-bar [hidden]="mapRegistered && configLoaded"></app-progress-bar>
  <div *ngIf="mapRegistered && configLoaded" class='container-fluid'>
    <div class="row" style="margin-top: 1px">
      <div class="col-sm text-right">
          <app-slider thumbLanel 
            [numDays]="numDaysOnSlider" 
            [(selectedDate)]="selectedDate" 
            [firstDay]="firstDay"
            [lastDay]="lastDay"
          ></app-slider>
      </div>
    </div>
    <div class="row" style="font-size: 12px; margin: 20px 0;">
      <div class="col">
          <div class="text-center charttitle">{{chartTitle}}</div>
      </div>
      <div class="col-md-auto">
        <span>As comapred to past trend: </span>
      </div>
      <div class="col-sm-auto">
        <div class="row">
          <div class="col-sm-auto">
            <button type="button" class="legend-button" style="background: green;"></button>
            <span>Improving</span>
          </div>
          <div class="col-sm-auto">
            <button type="button" class="legend-button" style="background: yellow;"></button>
            <span>Same</span>
          </div>
          <div class="col-sm-auto">
            <button type="button" class="legend-button" style="background: red;"></button>
            <span>Worsening</span>
          </div>
        </div>
      </div>
    </div>
    <div class="row justify-content-center" style="height: 75%;">
      <div class="col-sm-11 text-center" style="background: #063f6d;">
        <div *ngIf="view === 'usActive'">
          <app-us-active-cases [selectedDate]="selectedDate" [numDaysOnSlider]="numDaysOnSlider" (chartTitleChange)="chartTitle = $event"></app-us-active-cases>
        </div>
        <div *ngIf="view === 'worldActive'">
          <app-world-active-cases [selectedDate]="selectedDate" [numDaysOnSlider]="numDaysOnSlider" (chartTitleChange)="chartTitle = $event"></app-world-active-cases>
        </div>
        <div *ngIf="view === 'usDeaths'">
          <app-us-death-cases [selectedDate]="selectedDate" [numDaysOnSlider]="numDaysOnSlider" (chartTitleChange)="chartTitle = $event"></app-us-death-cases>
        </div>
        <div *ngIf="view === 'worldDeaths'">
          <app-world-death-cases [selectedDate]="selectedDate" [numDaysOnSlider]="numDaysOnSlider" (chartTitleChange)="chartTitle = $event"></app-world-death-cases>
        </div>
      </div>
    </div>
    <!-- <div class="row" style="margin-top: 1px">
      <div class="col-sm text-center">
          <app-slider thumbLanel 
            [numDays]="numDaysOnSlider" 
            [(selectedDate)]="selectedDate" 
            [firstDay]="firstDay"
            [lastDay]="lastDay"
          ></app-slider>
      </div>
    </div> -->
    <div class="row" style="margin-top: 30px">
      <span style="font-size: 12px;">
        <i>Methodology: Each day we apply our forecast models on the updated data provided by
        <a style="color: #E04E39 !important;" href="https://github.com/CSSEGISandData/COVID-19/" target="_blank">Center for Systems Science and Engineering (CSSE) at Johns Hopkins University</a>. Based on the models, 
        we forecast the new cases/deaths for that day and compare with the actual new cases/deaths. 
          The delta between these two numbers is used to color code the heatmap. On the extreme left hand side 
          of the scale is solid green which indicates either no new cases or the biggest drop compared to the 
          forecast on that day. On the extreme right hand side of the scale is solid red which indicates the 
          biggest increase compared to the forecast. All regions/countries are color coded in between these two 
          extremes. Note, the scale will be different for each day depending upon deviation from forecast.
        </i>
      </span>
    </div>
  </div>
  
  <footer class="page-footer font-small">
    <div class="footer-copyright text-right" style="font-size: 12px !important">Powered By:
      <a href="https://boltanalytics.com/" target="_blank" style="font-size: 12px !important;">Bolt Analytics</a>
    </div>
  </footer>
</div>
